<mat-card>
    <h1 class="mat-display-3">User</h1>
    <form [formGroup]="form">
        <mat-form-field>
            <mat-label>Name</mat-label>
            <input matInput formControlName="name" />
        </mat-form-field>

        <div
            *ngFor="let job of form.get('jobs')['controls']; index as i"
            [formGroup]="job"
        >
            <mat-form-field>
                <input matInput formControlName="employer" />
            </mat-form-field>

            <mat-form-field>
                <input matInput [matDatepicker]="dp3" formControlName="from" />
                <mat-datepicker-toggle
                    matSuffix
                    [for]="dp3"
                ></mat-datepicker-toggle>
                <mat-datepicker #dp3></mat-datepicker>
            </mat-form-field>

            <mat-form-field>
                <input matInput [matDatepicker]="dp4" formControlName="to" />
                <mat-datepicker-toggle
                    matSuffix
                    [for]="dp4"
                ></mat-datepicker-toggle>
                <mat-datepicker #dp4></mat-datepicker>
            </mat-form-field>

            <button mat-flat-button color="warn" (click)="deleteJob(i)">
                Delete
            </button>
        </div>

        <button mat-raised-button color="primary" (click)="addNewJob()">
            Add new Job
        </button>
    </form>

    <ng-container *ngIf="user$ | async as user">
        <pre>Store: {{ user | json }}</pre>
    </ng-container>
</mat-card>
